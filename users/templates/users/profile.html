{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}

{% if userProfile.id == user.id %}
  <div class = 'text-right'>
    <a href = "{% url 'edit profile' %}" class="btn btn-outline-secondary">Edit Profile</a>
  </div>
{% else %}
  {% include "followForm.html" with user=userProfile %}
{% endif %}

<br>
  <div class="text-center">
    <div class="">
      <img src="{{ userProfile.profile.image.url }}" class="rounded-circle account-image" height="">
      <div>
        <br>
        <h2 class="account-heading">{{ userProfile.username }}</h2>
        <p class="text-secondary">{{ userProfile.email }}</p>
      </div>
      <div class="row">
        <!-- Following -->
        <div class="col">
          <table class="table table-hover">
            <th>Following {{userProfile.profile.following.count}} users</th>
            {% for following in userProfile.profile.following.all %}
              <tr>
                <td>
                  <a href="{% url 'profile' following.id %}">{{ following.username }}</a>
                </td>
              </tr>
            {% endfor %}
          </table>
        </div>
        <!-- Followers -->
        <div class="col">
          <table class="table table-hover">
            <th>Followers</th>
            {% for follower in userProfile.followers.all %}
              <tr>
                <td>
                  <a href="{% url 'profile' follower.user.id %}">{{ follower.user.username }}</a>
                </td>
              </tr>
            {% endfor %}
          </table>
        </div>
        <!-- Signed Up Events -->
        <div class="col">
          <table class="table table-hover">
            <th>Signed Up Events</th>
            {% for event in userProfile.signed_up.all %}
              <tr>
                <td>
                    <a href="{% url 'event detail' event.id %}">
                      {{ event.name }}
                    </a>
                </td>
              </tr>
            {% endfor %}
          </table>
        </div>

      </div>
    </div>
  </div>

{% endblock content%}
